diff --git a/torch/csrc/THP_API.h b/torch/csrc/THP_API.h
index fbb9ce06c..f0e5ac291 100644
--- a/torch/csrc/THP_API.h
+++ b/torch/csrc/THP_API.h
@@ -6,7 +6,7 @@
     be defined only when compiling the core torch package.
 #endif
 
-#ifdef WITH_CUDA
+#ifdef WITH_ROCM
 #include "cuda/THCP.h"
 #include "cuda/undef_macros.h"
 #endif
